<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Mykonos Hot 5 ‚Äî Expanding Wild Demo</title>
<style>
  :root{
    --bg1:#0b1020;
    --bg2:#081426;
    --panel:#0f1b36;
    --txt:#e9f0ff;
    --accent:#8fd1ff;
    --accent2:#76ffa8;
    --gold:#ffd76b;
    --wild:#2ecc71;
  }
  html,body{margin:0;height:100%;background:radial-gradient(1200px 700px at 50% 100%, rgba(143,209,255,.08), transparent 60%), linear-gradient(180deg,var(--bg1),var(--bg2)); color:var(--txt); font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Arial}
  .wrap{max-width:920px;margin:0 auto;padding:18px}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
  h1{font-size:22px;margin:0;letter-spacing:.4px}
  .hud{display:flex;gap:10px;flex-wrap:wrap}
  .pill{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.14);border-radius:999px;padding:6px 10px;font-size:14px}
  .btn{appearance:none;border:none;border-radius:10px;padding:10px 16px;font-weight:800;cursor:pointer;background:var(--accent);color:#0b1020}
  .btn:disabled{opacity:.6;cursor:not-allowed}
  .machine{margin-top:14px;background:var(--panel);border:1px solid rgba(255,255,255,.12);border-radius:16px;overflow:hidden;box-shadow:0 10px 35px rgba(0,0,0,.35)}
  .topbar{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0))}
  .title{font-weight:900;letter-spacing:1px}
  .reels{position:relative;display:grid;grid-template-columns:repeat(5,1fr);gap:8px;padding:12px}
  .col{background:rgba(0,0,0,.18);border:1px solid rgba(255,255,255,.1);border-radius:12px;padding:8px;overflow:hidden}
  .cell{height:84px;display:flex;align-items:center;justify-content:center;font-size:38px;border-radius:10px;background:rgba(0,0,0,.25);border:1px solid rgba(255,255,255,.08);margin:6px 0;box-shadow:inset 0 4px 10px rgba(0,0,0,.25)}
  .cell.wild{background:rgba(46,204,113,.15);border-color:rgba(46,204,113,.55);text-shadow:0 0 12px rgba(46,204,113,.7)}
  .footer{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:12px;border-top:1px solid rgba(255,255,255,.08)}
  .lines{font-size:12px;opacity:.9}
  .flash{position:absolute;inset:0;background:radial-gradient(closest-side, rgba(118,255,168,.6), rgba(118,255,168,0));pointer-events:none;opacity:0;transition:opacity .25s}
  .flash.show{opacity:1;animation:flash .5s ease-out}
  @keyframes flash{0%{opacity:0}20%{opacity:1}100%{opacity:0}}
  .toast{position:fixed;left:50%;bottom:20px;transform:translateX(-50%);background:rgba(0,0,0,.65);border:1px solid rgba(255,255,255,.18);color:#fff;padding:8px 12px;border-radius:10px;font-size:14px;opacity:0;transition:.25s}
  .toast.show{opacity:1}
  /* –≥—Ä—ä—Ü–∫–∞ –ª–∏–Ω–∏–π–∫–∞ –≥–æ—Ä–µ/–¥–æ–ª—É –∑–∞ —Å—Ç–∏–ª */
  .greek{height:8px;background:
    linear-gradient(90deg, transparent 0 8px, rgba(255,255,255,.15) 8px 9px, transparent 9px 13px, rgba(255,255,255,.15) 13px 14px, transparent 14px 22px) repeat-x;
    background-size:22px 8px;opacity:.7}
  @media (max-width:640px){ .cell{height:64px;font-size:30px} }
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1>Mykonos Hot 5 ‚Äî Expanding Wild</h1>
    <div class="hud">
      <div class="pill">–ö—Ä–µ–¥–∏—Ç–∏: <span id="credits">1000</span></div>
      <div class="pill">–ó–∞–ª–æ–≥: <span id="bet">10</span></div>
      <div class="pill">–ü–µ—á–∞–ª–±–∞: <span id="win">0</span></div>
      <button id="spinBtn" class="btn">SPIN</button>
    </div>
  </header>

  <div class="machine">
    <div class="greek"></div>
    <div class="topbar">
      <div class="title">üçã üçí üîî ‚≠ê 7Ô∏è‚É£ ‚Ä¢ üçÄ WILD —Å–∞–º–æ –Ω–∞ –±–∞—Ä–∞–±–∞–Ω–∏ 2‚Äì4</div>
      <div class="pill">Paylines: 5</div>
    </div>

    <div id="reels" class="reels">
      <!-- 5 –∫–æ–ª–æ–Ω–∏ √ó 3 –∫–ª–µ—Ç–∫–∏ -->
    </div>
    <div id="flash" class="flash"></div>

    <div class="footer">
      <div class="lines">–õ–∏–Ω–∏–∏: –≥–æ—Ä–Ω–∞ ‚Ä¢ —Å—Ä–µ–¥–Ω–∞ ‚Ä¢ –¥–æ–ª–Ω–∞ ‚Ä¢ –¥–∏–∞–≥–æ–Ω–∞–ª ‚ÜòÔ∏é ‚Ä¢ –¥–∏–∞–≥–æ–Ω–∞–ª ‚ÜóÔ∏é</div>
      <div class="pill">WILD üçÄ ‚Üí –∞–∫–æ —Å–µ –ø–∞–¥–Ω–µ –Ω–∞ (2‚Äì4) ‚Üí —Ü–µ–ª–∏—è—Ç –µ–∫—Ä–∞–Ω —Å—Ç–∞–≤–∞ WILD</div>
    </div>
    <div class="greek"></div>
  </div>

  <div id="toast" class="toast"></div>
</div>

<script>
/* ----------------------------------
   –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
-----------------------------------*/
const ROWS = 3, COLS = 5;
const SYMBOLS = ['üçá','üçã','üçí','üîî','‚≠ê','7Ô∏è‚É£']; // –±–∞–∑–æ–≤–∏ —Å–∏–º–≤–æ–ª–∏
const WILD = 'üçÄ';
const ALLOWED_WILD_REELS = new Set([1,2,3]); // –±–∞—Ä–∞–±–∞–Ω–∏ 2‚Äì4 (0-–±–∞–∑–æ–≤ –∏–Ω–¥–µ–∫—Å)
const SPIN_TIME_PER_REEL = 700; // ms
const EXTRA_REEL_DELAY = 120;   // ms, —Å—Ç—ä–ø–∞–ª–æ–≤–∏–¥–Ω–æ —Å–ø–∏—Ä–∞–Ω–µ
const CELL_CLASS = 'cell';

// paytable –∑–∞ 5 –≤ –ª–∏–Ω–∏—è (–ø—Ä–∏–º–µ—Ä–Ω–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏, –º–æ–∂–µ—à –¥–∞ –≥–∏ —Å–º–µ–Ω–∏—à)
const paytable = {
  '7Ô∏è‚É£': {5: 250},
  '‚≠ê': {5: 150},
  'üîî': {5: 120},
  'üçí': {5: 80},
  'üçã': {5: 60},
  'üçá': {5: 40},
  [WILD]: {5: 300}
};

// 5 –ª–∏–Ω–∏–∏
const lines = [
  [[0,0],[0,1],[0,2],[0,3],[0,4]], // top
  [[1,0],[1,1],[1,2],[1,3],[1,4]], // mid
  [[2,0],[2,1],[2,2],[2,3],[2,4]], // bottom
  [[0,0],[1,1],[2,2],[1,3],[0,4]], // V –¥–∏–∞–≥–æ–Ω–∞–ª
  [[2,0],[1,1],[0,2],[1,3],[2,4]], // Œõ –¥–∏–∞–≥–æ–Ω–∞–ª
];

// –∫—Ä–µ–¥–∏—Ç–∏ / –∑–∞–ª–æ–≥
let credits = 1000;
let bet = 10;
const uiCredits = document.getElementById('credits');
const uiBet = document.getElementById('bet');
const uiWin = document.getElementById('win');
const spinBtn = document.getElementById('spinBtn');
const reelsEl = document.getElementById('reels');
const flashEl = document.getElementById('flash');
const toastEl = document.getElementById('toast');
uiCredits.textContent = credits;
uiBet.textContent = bet;

// —Å—ä–∑–¥–∞–π –∫–ª–µ—Ç–∫–∏
const colsEls = [];
for (let c=0;c<COLS;c++){
  const col = document.createElement('div');
  col.className = 'col';
  for (let r=0;r<ROWS;r++){
    const cell = document.createElement('div');
    cell.className = CELL_CLASS;
    cell.textContent = ' ';
    col.appendChild(cell);
  }
  reelsEl.appendChild(col);
  colsEls.push(col);
}

// Reel strips ‚Äî –±–µ–∑ WILD –Ω–∞ 1 –∏ 5-—Ç–∏ –±–∞—Ä–∞–±–∞–Ω; —Å WILD –Ω–∞ 2‚Äì4
const reelStrips = [
  ['üçá','üçã','üçí','üîî','‚≠ê','7Ô∏è‚É£','üçá','üçí','üçã','üîî','‚≠ê','7Ô∏è‚É£'],
  ['üçá','üçã',WILD,'üçí','üîî','‚≠ê',WILD,'7Ô∏è‚É£','üçá',WILD,'üçã','üçí','üîî','‚≠ê'],
  ['üçá',WILD,'üçã','üçí','üîî','‚≠ê','7Ô∏è‚É£','üçá','üçã',WILD,'üçí','üîî',WILD,'‚≠ê'],
  ['üçá','üçã','üçí','üîî',WILD,'‚≠ê','7Ô∏è‚É£','üçá',WILD,'üçã','üçí','üîî','‚≠ê'],
  ['üçá','üçã','üçí','üîî','‚≠ê','7Ô∏è‚É£','üçá','üçã','üçí','üîî','‚≠ê','7Ô∏è‚É£'],
];

// –ø–æ–º–æ—â–Ω–∏
const randInt = (min,max)=>Math.floor(Math.random()*(max-min+1))+min;

// –≤–∑–µ–º–∏ 3 –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–Ω–∏ —Å–∏–º–≤–æ–ª–∞ –æ—Ç –ª–µ–Ω—Ç–∞
function take3(strip){
  const i = randInt(0, strip.length-1);
  // wrap –æ–∫–æ–ª–æ
  const s0 = strip[i];
  const s1 = strip[(i+1)%strip.length];
  const s2 = strip[(i+2)%strip.length];
  return [s0,s1,s2];
}

// –≥–µ–Ω–µ—Ä–∏—Ä–∞–π –∫—Ä–∞–π–Ω–∞ —Ä–µ—à–µ—Ç–∫–∞ (–ø–æ –ª–µ–Ω—Ç–∏)
function generateGrid(){
  const grid = Array.from({length: ROWS}, ()=>Array(COLS).fill(''));
  for (let c = 0; c < COLS; c++){
    const strip = reelStrips[c];
    const trio = take3(strip);
    // –≤–µ—Ä—Ç–∏–∫–∞–ª–Ω–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–∞–Ω–µ: top..bottom
    grid[0][c] = trio[0];
    grid[1][c] = trio[1];
    grid[2][c] = trio[2];
  }
  return grid;
}

// –∏–º–∞ –ª–∏ WILD –Ω–∞ 2‚Äì4 –±–∞—Ä–∞–±–∞–Ω?
function hasAllowedWild(grid){
  for (let r=0;r<ROWS;r++){
    for (let c=0;c<COLS;c++){
      if (grid[r][c]===WILD && ALLOWED_WILD_REELS.has(c)) return true;
    }
  }
  return false;
}

// —Ä–∞–∑–ø—ä–Ω–∏ –≤—Å–∏—á–∫–æ –Ω–∞ WILD
function expandAllToWild(grid){
  for (let r=0;r<ROWS;r++){
    for (let c=0;c<COLS;c++){
      grid[r][c] = WILD;
    }
  }
}

// –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–∞–π —Ä–µ—à–µ—Ç–∫–∞—Ç–∞
function renderGrid(grid){
  for (let c=0;c<COLS;c++){
    const col = colsEls[c];
    const cells = col.children;
    for (let r=0;r<ROWS;r++){
      const sym = grid[r][c];
      const el = cells[r];
      el.textContent = sym;
      el.classList.toggle('wild', sym===WILD);
    }
  }
}

// –ø—Ä–æ—Å—Ç–∞ –∞–Ω–∏–º–∞—Ü–∏—è –Ω–∞ –≤—ä—Ä—Ç–µ–Ω–µ
function spinAnimateColumn(colIndex, finalSymbols){
  return new Promise(resolve=>{
    const col = colsEls[colIndex];
    const cells = col.children;
    // –≤—Ä–µ–º–µ–Ω–Ω–æ –≤—ä—Ä—Ç–µ–Ω–µ
    const start = performance.now();
    const total = SPIN_TIME_PER_REEL + colIndex*EXTRA_REEL_DELAY;
    let raf;
    function tick(t){
      const dt = t - start;
      // –≤—ä—Ä—Ç–∏ ‚Äû—Ñ–∞–ª—à–∏–≤–æ‚Äú —Å—ä—Å —Å–ª—É—á–∞–π–Ω–∏ —Å–∏–º–≤–æ–ª–∏
      for (let r=0;r<ROWS;r++){
        const randomSym = (ALLOWED_WILD_REELS.has(colIndex)?[...SYMBOLS,WILD]:SYMBOLS)[randInt(0, (ALLOWED_WILD_REELS.has(colIndex)?SYMBOLS.length:SYMBOLS.length)-1)];
        cells[r].textContent = randomSym;
        cells[r].classList.toggle('wild', randomSym===WILD);
      }
      if (dt >= total){
        // —Å–ª–æ–∂–∏ —Ñ–∏–Ω–∞–ª–Ω–∏—Ç–µ —Å–∏–º–≤–æ–ª–∏
        for (let r=0;r<ROWS;r++){
          cells[r].textContent = finalSymbols[r];
          cells[r].classList.toggle('wild', finalSymbols[r]===WILD);
        }
        cancelAnimationFrame(raf);
        resolve();
      } else {
        raf = requestAnimationFrame(tick);
      }
    }
    raf = requestAnimationFrame(tick);
  });
}

// –æ—Ü–µ–Ω–∫–∞ –Ω–∞ –ø–µ—á–∞–ª–±–∞
function evaluatePayout(grid){
  // –∞–∫–æ –≤—Å–∏—á–∫–æ –µ WILD ‚Üí –Ω–∞–π-–¥–æ–±—Ä–∞—Ç–∞ 5-of-a-kind * –±—Ä–æ–π –ª–∏–Ω–∏–∏
  const allWild = grid.every(row => row.every(sym => sym===WILD));
  if (allWild){
    let best = 0;
    for (const [sym,vals] of Object.entries(paytable)){
      const v = vals[5]||0;
      if (v>best) best = v;
    }
    return best * lines.length;
  }

  // –∏–Ω–∞—á–µ ‚Äî 5-of-a-kind —Å WILD –∫–∞—Ç–æ –∑–∞–º–µ—Å—Ç–∏—Ç–µ–ª
  let total = 0;
  for (const line of lines){
    const symbols = line.map(([r,c])=>grid[r][c]);
    // —Ç–∞—Ä–≥–µ—Ç –µ –ø—ä—Ä–≤–∏—è—Ç –Ω–µ-WILD —Å–∏–º–≤–æ–ª; –∞–∫–æ –Ω—è–º–∞ ‚Üí WILD
    const target = symbols.find(s=>s!==WILD) ?? WILD;
    const ok = symbols.every(s=>s===target || s===WILD);
    if (ok){
      total += (paytable[target]?.[5]||0);
    }
  }
  return total;
}

// toast helper
let toastTimer=null;
function toast(msg){
  toastEl.textContent = msg;
  toastEl.classList.add('show');
  clearTimeout(toastTimer);
  toastTimer = setTimeout(()=>toastEl.classList.remove('show'), 1400);
}

// –≥–ª–∞–≤–Ω–∞ –ª–æ–≥–∏–∫–∞ –∑–∞ SPIN
let spinning = false;
spinBtn.addEventListener('click', async ()=>{
  if (spinning) return;
  if (credits < bet){ toast('–ù–µ–¥–æ—Å—Ç–∞—Ç—ä—á–Ω–æ –∫—Ä–µ–¥–∏—Ç–∏'); return; }

  spinning = true;
  spinBtn.disabled = true;
  uiWin.textContent = '0';
  credits -= bet; uiCredits.textContent = credits;

  // –≥–µ–Ω–µ—Ä–∏—Ä–∞–π –∫—Ä–∞–π–Ω–∞ —Ä–µ—à–µ—Ç–∫–∞ –∏ –∑–∞–≤—ä—Ä—Ç–∏ –≤–∏–∑—É–∞–ª–Ω–æ
  const finalGrid = generateGrid();
  // –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–Ω–∞ –∞–Ω–∏–º–∞—Ü–∏—è –ø–æ –∫–æ–ª–æ–Ω–∏
  for (let c=0;c<COLS;c++){
    const finals = [finalGrid[0][c], finalGrid[1][c], finalGrid[2][c]];
    /* eslint-disable no-await-in-loop */
    await spinAnimateColumn(c, finals);
  }

  // —Ç—Ä–∏–≥–µ—Ä –∑–∞ —Ä–∞–∑–ø—ä–≤–∞–Ω–µ (–∞–∫–æ –∏–º–∞ WILD –Ω–∞ 2‚Äì4)
  if (hasAllowedWild(finalGrid)){
    flashEl.classList.add('show');
    setTimeout(()=>flashEl.classList.remove('show'), 500);
    expandAllToWild(finalGrid);
    renderGrid(finalGrid);
    toast('EXPANDING WILD! üçÄ');
  }

  const win = evaluatePayout(finalGrid);
  uiWin.textContent = String(win);
  credits += win; uiCredits.textContent = credits;

  spinning = false;
  spinBtn.disabled = false;
});

// –ø—ä—Ä–≤–æ–Ω–∞—á–∞–ª–Ω–æ –ø–æ–∫–∞–∑–≤–∞–Ω–µ (–ø—Ä–∞–∑–Ω–∞ —Ä–µ—à–µ—Ç–∫–∞)
renderGrid(Array.from({length:ROWS},()=>Array(COLS).fill(' ')));
</script>
</body>
</html>



