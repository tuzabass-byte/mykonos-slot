<!doctype html>
<html lang="bg">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>Mykonos Hot 5</title>
<style>
/* ... (—Å—ä—â–∏—Ç–µ CSS —Å—Ç–∏–ª–æ–≤–µ –∫–∞—Ç–æ –ø—Ä–µ–¥–∏, –≤–∫–ª—é—á–∏—Ç–µ–ª–Ω–æ POP –µ—Ñ–µ–∫—Ç–∞) ... */
</style>
</head>
<body>
<div class="wrap"><div class="panel">
  <h1>Mykonos Hot 5 üé∞</h1>
  <div class="status">
    <div class="pill">–ö—Ä–µ–¥–∏—Ç–∏: <span id="credits">1000</span></div>
    <div class="pill">–ó–∞–ª–æ–≥: <input id="bet" type="number" min="1" max="1000" step="1" value="10"></div>
    <div class="pill">–ü–æ—Å–ª–µ–¥–Ω–∞ –ø–µ—á–∞–ª–±–∞: <span id="lastwin">0</span></div>
  </div>
  <div class="machine"><div id="reels" class="reels"></div></div>
  <div class="controls">
    <button id="spinBtn" class="spin">SPIN</button>
    <div class="wrapbox"><strong>–õ–∏–Ω–∏–∏:</strong><span>5 (—Ñ–∏–∫—Å–∏—Ä–∞–Ω–∏)</span></div>
    <div class="wrapbox"><strong>–û–±—â –∑–∞–ª–æ–≥:</strong><span id="totalbet">10</span></div>
  </div>
  <div class="pay">–¢–∞–±–ª–∏—Ü–∞ —Å –ø–µ—á–∞–ª–±–∏ (√ó –æ–±—â–∏—è –∑–∞–ª–æ–≥) ...</div>
</div></div>

<!-- üéµ –ó–≤—É–∫–æ–≤–∏ —Ñ–∞–π–ª–æ–≤–µ -->
<audio id="soundSpin" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg"></audio>
<audio id="soundWin" src="https://actions.google.com/sounds/v1/cartoon/cartoon_boing.ogg"></audio>
<audio id="soundWild" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>

<script>
(()=>{
// DOM
const reelsRoot=document.getElementById('reels'),
      creditsEl=document.getElementById('credits'),
      lastWinEl=document.getElementById('lastwin'),
      betEl=document.getElementById('bet'),
      totalBetEl=document.getElementById('totalbet'),
      spinBtn=document.getElementById('spinBtn');

// üéµ –ó–≤—É—Ü–∏
const sndSpin=document.getElementById('soundSpin'),
      sndWin=document.getElementById('soundWin'),
      sndWild=document.getElementById('soundWild');

// —Ñ—É–Ω–∫—Ü–∏—è –∑–∞ –ø—É—Å–∫–∞–Ω–µ –Ω–∞ –∑–≤—É–∫
function play(snd){ snd.currentTime=0; snd.play().catch(()=>{}); }

// ... (—Å—ä—â–∞—Ç–∞ –ª–æ–≥–∏–∫–∞ –∑–∞ —Å–∏–º–≤–æ–ª–∏, –ø–µ—á–∞–ª–±–∏, –ª–∏–Ω–∏–∏) ...

// üçÄ POP wilds + –∑–≤—É–∫
function popWilds(board){
  for(let c=0;c<COLS;c++){
    for(let r=0;r<ROWS;r++){
      if(board[c][r]===SYM.WILD){
        const cell=grid[c][r];
        cell.classList.remove('wild-pop'); void cell.offsetWidth;
        cell.classList.add('wild-pop');
        play(sndWild); // üéµ –∑–≤—É–∫ –∑–∞ WILD
        cell.addEventListener('animationend',()=>cell.classList.remove('wild-pop'),{once:true});
      }
    }
  }
}

function spin(){
  if(spinning) return;
  const bet=normBet();
  if(credits<bet){ alert('–ù–µ–¥–æ—Å—Ç–∞—Ç—ä—á–Ω–∏ –∫—Ä–µ–¥–∏—Ç–∏.'); return; }
  credits-=bet; creditsEl.textContent=credits; lastWinEl.textContent='0';
  spinning=true; spinBtn.disabled=true;
  play(sndSpin); // üéµ –∑–≤—É–∫ –ø—Ä–∏ SPIN

  // ... (—Å—ä—â–∞—Ç–∞ –∞–Ω–∏–º–∞—Ü–∏—è –∏ –ª–æ–≥–∏–∫–∞ –∑–∞ –∑–∞–≤—ä—Ä—Ç–∞–Ω–µ) ...

      if(c===COLS-1){
        popWilds(final);
        const win=evalLines(final,bet)+evalScatters(final,bet);
        credits+=win; creditsEl.textContent=credits; lastWinEl.textContent=win;
        if(win>0){ 
          play(sndWin); // üéµ –∑–≤—É–∫ –ø—Ä–∏ –ø–µ—á–∞–ª–±–∞
          reelsRoot.classList.remove('winflash'); void reelsRoot.offsetWidth;
          reelsRoot.classList.add('winflash');
        }
        spinning=false; spinBtn.disabled=false;
      }
  // ...
}
spinBtn.addEventListener('click',spin);
})();
</script>
</body>
</html>